{% load static %}

<!DOCTYPE html>
<!DOCTYPE html>

<!--
 // WEBSITE: https://themefisher.com
 // TWITTER: https://twitter.com/themefisher
 // FACEBOOK: https://www.facebook.com/themefisher
 // GITHUB: https://github.com/themefisher/
-->

<html lang="en">
  {% include "header.html" %}


<body>
  <!-- preloader start -->
  <div class="preloader">
    <img src="{%static 'images/preloader.gif' %}" alt="preloader">
  </div>
  <!-- preloader end -->


  {% include "nav.html" %}

  
<!-- Modal -->
<div class="modal fade" id="signupModal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content rounded-0 border-0 p-4">
            <div class="modal-header border-0">
                <h3>Register</h3>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="login">
                    <form action="#" class="row">
                        <div class="col-12">
                            <input type="text" class="form-control mb-3" id="signupPhone" name="signupPhone" placeholder="Phone">
                        </div>
                        <div class="col-12">
                            <input type="text" class="form-control mb-3" id="signupName" name="signupName" placeholder="Name">
                        </div>
                        <div class="col-12">
                            <input type="email" class="form-control mb-3" id="signupEmail" name="signupEmail" placeholder="Email">
                        </div>
                        <div class="col-12">
                            <input type="password" class="form-control mb-3" id="signupPassword" name="signupPassword" placeholder="Password">
                        </div>
                        <div class="col-12">
                            <button type="submit" class="btn btn-primary">SIGN UP</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Modal -->
<div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content rounded-0 border-0 p-4">
            <div class="modal-header border-0">
                <h3>Login</h3>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form action="#" class="row">
                    <div class="col-12">
                        <input type="text" class="form-control mb-3" id="loginPhone" name="loginPhone" placeholder="Phone">
                    </div>
                    <div class="col-12">
                        <input type="text" class="form-control mb-3" id="loginName" name="loginName" placeholder="Name">
                    </div>
                    <div class="col-12">
                        <input type="password" class="form-control mb-3" id="loginPassword" name="loginPassword" placeholder="Password">
                    </div>
                    <div class="col-12">
                        <button type="submit" class="btn btn-primary">LOGIN</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- page title -->
<section class="page-title-section overlay" data-background="{% static 'images/backgrounds/page-title.jpg' %}">
  <div class="container">
    <div class="row">
      <div class="col-md-8">
        <ul class="list-inline custom-breadcrumb mb-2">
          <li class="list-inline-item"><a class="h2 text-primary font-secondary" href="{% url 'listcourses' %}">Our Courses</a></li>
          <li class="list-inline-item text-white h3 font-secondary nasted">{{ course.title }}</li>
        </ul>
        <p class="text-lighten mb-0">Our courses offer a good compromise between the continuous assessment favoured by some universities and the emphasis placed on final exams by others.</p>
      </div>
    </div>
  </div>
</section>
<!-- /page title -->

<!-- section -->
<section class="section-sm">
  <div class="container">
    <div class="row">
      <div class="col-12 mb-4">
        <!-- course thumb -->
        <img src="{% static 'images/courses/course-single.jpg'%}" class="img-fluid w-100">
      </div>
    </div>
    <!-- course info -->
    <div class="row align-items-center mb-5">
      <div class="col-xl-3 order-1 col-sm-6 mb-4 mb-xl-0">
        <h2>{{ course.title }}</h2>
      </div>
      <div class="col-xl-6 order-sm-3 order-xl-2 col-12 order-2">
        <ul class="list-inline text-xl-center">
          <li class="list-inline-item mr-4 mb-3 mb-sm-0">
            <div class="d-flex align-items-center">
              <i class="ti-alarm-clock text-primary icon-md mr-2"></i>
              <div class="text-left">
                <h6 class="mb-0">DATE POSTED</h6>
                <p class="mb-0">{{ course.date_posted|date:"F j, Y" }}</p>
              </div>
            </div>
          </li>
         
        </ul>
      </div>
      <div class="col-xl-3 text-sm-right text-left order-sm-2 order-3 order-xl-3 col-sm-6 mb-4 mb-xl-0">
        <li class="list-inline-item mr-4 mb-3 mb-sm-0">
          <div class="d-flex align-items-center">
            <i class="ti-file text-primary icon-md mr-2"></i>
            <div class="text-left">
              <h6 class="mb-0">COURSE FILE</h6>
              <p class="mb-0"><a href="{{ course.file.url }}">Download</a></p>
            </div>
          </div>
        </li>
  </div>
      <!-- border -->
      <div class="col-12 mt-4 order-4">
        <div class="border-bottom border-primary"></div>
      </div>
    </div>
    <!-- course details -->
    <div class="row">
      <div class="col-12 mb-4">
        <h3>About Course</h3>
        <p>{{ course.description }}</p>

      </div>
      <!-- Bouton pour générer le quiz --> 
      <div class="row">
        <div class="col-12 mb-4">
<button id="generate-quiz-btn" data-course-id="{{ course.id }}" class="btn btn-primary">
  <i class="fas fa-plus"></i> Générer un quiz
</button>
</div>

<!-- Conteneur pour afficher les questions générées -->
<div class="row">
  <div class="col-12 mb-4">
<div id="quiz-container"></div>
</div>

<script>
   document.getElementById('generate-quiz-btn').addEventListener('click', function () {
                            const courseId = this.getAttribute('data-course-id');

                           /* fetch(`/cours/courses/${courseId}/generate_quiz/`)
    .then(response => response.json())
    .then(data => {
        console.log(data); // Assurez-vous que les données sont bien reçues
        const quizContainer = document.getElementById('quiz-container');
        quizContainer.innerHTML = ''; // Vider le conteneur

        // Vérifiez si 'questions' existe et est un tableau
        if (data.questions && Array.isArray(data.questions) && data.questions.length > 0) {
            data.questions.forEach((item, index) => {
                const questionElement = document.createElement('div'); // Créer un div pour chaque question
                const questionText = document.createElement('p'); // Créer un élément pour le texte de la question
                questionText.textContent = `${index + 1}. ${item.question}`; // Ajoutez le texte de la question
                questionElement.appendChild(questionText); // Ajoutez le texte de la question au div

                // Créer une liste pour les options
                const optionsList = document.createElement('ul');
                item.options.forEach((option, optionIndex) => {
                    const optionItem = document.createElement('li'); // Créer un élément de liste pour chaque option
                    const checkbox = document.createElement('input'); // Créer une case à cocher
                    checkbox.type = 'checkbox';
                    checkbox.value = option; // La valeur de la case à cocher est l'option

                    const label = document.createElement('label'); // Créer un label pour la case à cocher
                    label.textContent = option; // Ajouter le texte de l'option
                    label.prepend(checkbox); // Ajouter la case à cocher avant le texte

                    optionItem.appendChild(label); // Ajouter le label à l'élément de liste
                    optionsList.appendChild(optionItem); // Ajouter l'élément de liste à la liste
                });

                questionElement.appendChild(optionsList); // Ajoutez la liste des options au div de la question
                quizContainer.appendChild(questionElement); // Ajoutez le div de la question au conteneur
            });

            // Créer un bouton pour afficher les réponses correctes
            const showAnswersBtn = document.createElement('button');
            showAnswersBtn.textContent = 'Afficher les réponses correctes';
            showAnswersBtn.addEventListener('click', () => {
                showCorrectAnswers(data.questions); // Appeler la fonction pour afficher les réponses correctes
            });
            quizContainer.appendChild(showAnswersBtn); // Ajouter le bouton au conteneur
        } else {
            quizContainer.innerHTML = `<p>Aucune question générée.</p>`;
        }
    })
    .catch(error => {
        console.error('Erreur lors de la récupération des données :', error);
        const quizContainer = document.getElementById('quiz-container');
        quizContainer.innerHTML = `<p>Une erreur est survenue lors de la génération du quiz.</p>`;
    });

// Fonction pour afficher les réponses correctes
function showCorrectAnswers(questions) {
    questions.forEach((item, index) => {
        const correctAnswer = item.correct_answer; // Récupérer la réponse correcte
        const questionElement = document.querySelector(`#quiz-container div:nth-child(${index + 1})`);
        
        // Créer un élément pour afficher la réponse correcte
        const answerElement = document.createElement('p');
        answerElement.textContent = `Réponse correcte : ${correctAnswer}`;
        answerElement.style.color = 'green'; // Couleur verte pour la réponse correcte
        questionElement.appendChild(answerElement); // Ajouter la réponse correcte au div de la question
    });
}*/fetch(`/cours/courses/${courseId}/generate_quiz/`)
.then(response => response.json())
            .then(data => {
                console.log(data); // Vérifiez les données dans la console
                const quizContainer = document.getElementById('quiz-container');
                quizContainer.innerHTML = ''; // Vider le conteneur

                // Vérifiez si 'questions' existe et est un tableau
                if (data.questions && Array.isArray(data.questions) && data.questions.length > 0) {
                    data.questions.forEach((item, index) => {
                        const questionElement = document.createElement('div'); // Créer un div pour chaque question
                        questionElement.className = 'question'; // Ajouter une classe pour le style
                        const questionText = document.createElement('p'); // Créer un élément pour le texte de la question
                        questionText.textContent = `${index + 1}. ${item.question}`; // Ajoutez le texte de la question
                        questionElement.appendChild(questionText); // Ajoutez le texte de la question au div

                        // Créer une liste pour les options
                        const optionsList = document.createElement('ul');
                        item.options.forEach((option, optionIndex) => {
                            const optionItem = document.createElement('li'); // Créer un élément de liste pour chaque option
                            const checkbox = document.createElement('input'); // Créer une case à cocher
                            checkbox.type = 'checkbox';
                            checkbox.value = option; // La valeur de la case à cocher est l'option

                            const label = document.createElement('label'); // Créer un label pour la case à cocher
                            label.textContent = option; // Ajouter le texte de l'option
                            label.className = 'option-label'; // Ajouter une classe pour le style
                            label.prepend(checkbox); // Ajouter la case à cocher avant le texte

                            optionItem.appendChild(label); // Ajouter le label à l'élément de liste
                            optionsList.appendChild(optionItem); // Ajouter l'élément de liste à la liste
                        });

                        questionElement.appendChild(optionsList); // Ajoutez la liste des options au div de la question
                        quizContainer.appendChild(questionElement); // Ajoutez le div de la question au conteneur
                    });

                    // Créer un bouton pour afficher les réponses correctes
                    const showAnswersBtn = document.createElement('button');
                    showAnswersBtn.textContent = 'Afficher les réponses correctes';
                    showAnswersBtn.style.marginTop = '20px'; // Ajouter un espacement au-dessus du bouton

                    // Événement au clic pour afficher les réponses correctes
                    showAnswersBtn.addEventListener('click', () => {
                        showCorrectAnswers(data.questions); // Appeler la fonction pour afficher les réponses correctes
                    });
                    quizContainer.appendChild(showAnswersBtn); // Ajouter le bouton au conteneur
                } else {
                    quizContainer.innerHTML = `<p>Aucune question générée.</p>`;
                }
            })
            .catch(error => {
                console.error('Erreur lors de la récupération des données :', error);
                const quizContainer = document.getElementById('quiz-container');
                quizContainer.innerHTML = `<p>Une erreur est survenue lors de la génération du quiz.</p>`;
            });

        // Fonction pour afficher les réponses correctes
        function showCorrectAnswers(questions) {
            questions.forEach((item, index) => {
                const correctAnswer = item.correct_answer; // Récupérer la réponse correcte
                const questionElement = document.querySelector(`#quiz-container .question:nth-child(${index + 1})`);
                
                // Créer un élément pour afficher la réponse correcte
                const answerElement = document.createElement('p');
                answerElement.textContent = `Réponse correcte : ${correctAnswer}`;
                answerElement.className = 'correct-answer'; // Ajouter une classe pour le style
                questionElement.appendChild(answerElement); // Ajouter la réponse correcte au div de la question
            });
          }});
                       
</script>
<!--hhhh-->

  


<!----hhh-->

      
      <!-- teacher -->
      <div class="col-12">
        <h5 class="mb-3">Teacher</h5>
        <div class="d-flex justify-content-between align-items-center flex-wrap">
          <div class="media mb-2 mb-sm-0">
            <img class="mr-4 img-fluid" src="{% static 'images/teacher.jpg'%}" alt="Teacher">
            <div class="media-body">
              <h4 class="mt-0">Sam Somrat</h4>
              Photographer
            </div>
          </div>
          <div class="social-link">
            <h6 class="d-none d-sm-block">Social Link</h6>
            <ul class="list-inline">
              <li class="list-inline-item"><a class="d-inline-block text-light p-1" href="https://themefisher.com/"><i class="ti-facebook"></i></a></li>
              <li class="list-inline-item"><a class="d-inline-block text-light p-1" href="https://themefisher.com/"><i class="ti-twitter-alt"></i></a></li>
              <li class="list-inline-item"><a class="d-inline-block text-light p-1" href="https://themefisher.com/"><i class="ti-linkedin"></i></a></li>
              <li class="list-inline-item"><a class="d-inline-block text-light p-1" href="https://themefisher.com/"><i class="ti-instagram"></i></a></li>
            </ul>
          </div>
        </div>
        <div class="border-bottom border-primary mt-4"></div>
      </div>
    </div>
  </div>
</section>
<!-- /section -->







{% include 'footer.html'%}

{% include 'script.html'%}
</body>
</html>